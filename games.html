<!DOCTYPE HTML>

<html>
<!-- TITLE SECTION !-->
<head>
<title>Felipinho do Grau</title>
<meta charset="utf-8">
<meta property="og:image" content="images/cover.jpg" />
<link rel="icon" type="image/x-icon" href="images/favicon.ico">
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" href="css/snake.css">
</head>

<body>
<!-- HEADER SECTION !-->
<header>
  <nav class="main-nav">
    <ul>
      <li>
        <ul>
          <li><a href="index.html">Início</a></li>
          <li><a href="games.html"  class="active">Jogos</a></li>
          <li><a href="contact.html" >Quem Sou Eu</a></li>
        </ul>
      </li>
    </ul>
  </nav>
</header>

<!-- COVER SECTION !-->
<section id="home-head" class="cover">
  <h1>Jogos</h1>
</section>

</section>

<!-- INTRODUCTION SECTION !-->
<section id="main-content">
  <div class="text-intro">
    <h3>Snake Game</h3>
    <br>
    <!-- Snake game start -->
    <div id="snake-game" style="margin-top:12px;">
      <div style="margin:6px 0;">Pontuação: <span id="snake-score">0</span></div>
      <canvas id="snakeCanvas" width="480" height="320" style="border:1px solid #000; background:#fff; display:block;
        max-width:100%; height:auto;"></canvas>
      <div class="snake-controls">
        <button id="snake-play" class="snake-btn">Jogar</button>
        <button id="snake-restart" class="snake-btn" style="display:none;">Reiniciar</button>
        
        <!-- Botões direcionais para mobile -->
        <div class="direction-buttons">
          <button class="dir-btn" id="btn-up">↑</button>
          <div class="horizontal-buttons">
            <button class="dir-btn" id="btn-left">←</button>
            <button class="dir-btn" id="btn-right">→</button>
          </div>
          <button class="dir-btn" id="btn-down">↓</button>
        </div>
      </div>
    </div>

    <script>
    (function(){
      const canvas = document.getElementById('snakeCanvas');
      const ctx = canvas.getContext('2d');
      const scale = 16; // tamanho de cada célula
      const rows = Math.floor(canvas.height / scale);
      const cols = Math.floor(canvas.width / scale);

      let snake = [{x: Math.floor(cols/2), y: Math.floor(rows/2)}];
      let dir = {x: 1, y: 0};
      let food = randomFood();
      let score = 0;
      let running = false;
      let interval = null;

      const scoreEl = document.getElementById('snake-score');
      const restartBtn = document.getElementById('snake-restart');
      const playBtn = document.getElementById('snake-play');

      function randomFood(){
        let f = {x: Math.floor(Math.random() * cols), y: Math.floor(Math.random() * rows)};
        while(snake.some(s => s.x === f.x && s.y === f.y)){
          f = {x: Math.floor(Math.random() * cols), y: Math.floor(Math.random() * rows)};
        }
        return f;
      }

      function loop(){
        if(!running) return;
        update();
        draw();
      }

      function update(){
        const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};

        // Colisão com paredes ou com o próprio corpo = game over
        if(head.x < 0 || head.x >= cols || head.y < 0 || head.y >= rows || snake.some(s => s.x === head.x && s.y === head.y)){
          gameOver();
          return;
        }

        snake.unshift(head);

        if(head.x === food.x && head.y === food.y){
          score++;
          scoreEl.textContent = score;
          food = randomFood();
        } else {
          snake.pop();
        }
      }

      function draw(){
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // desenha comida
        ctx.fillStyle = '#e74c3c';
        ctx.fillRect(food.x * scale, food.y * scale, scale, scale);

        // desenha cobrinha
        ctx.fillStyle = '#111';
        for(let i = 0; i < snake.length; i++){
          const s = snake[i];
          // deixar um pixel de separação para visual
          ctx.fillRect(s.x * scale, s.y * scale, scale - 1, scale - 1);
        }
      }

      function gameOver(){
        running = false;
        clearInterval(interval);
        // sobrepor mensagem
        ctx.fillStyle = 'rgba(0,0,0,0.6)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#fff';
        ctx.font = '18px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('Game Over — Pontuação: ' + score, canvas.width / 2, canvas.height / 2 - 8);
        ctx.fillText('Clique em Reiniciar', canvas.width / 2, canvas.height / 2 + 18);
        restartBtn.style.display = 'inline-block';
        playBtn.style.display = 'none';
      }

      function reset(){
        snake = [{x: Math.floor(cols/2), y: Math.floor(rows/2)}];
        dir = {x: 1, y: 0};
        food = randomFood();
        score = 0;
        scoreEl.textContent = score;
        running = false;
        restartBtn.style.display = 'none';
        playBtn.style.display = 'inline-block';
        clearInterval(interval);
        draw();
      }

      function startGame() {
        if (!running) {
          running = true;
          playBtn.style.display = 'none';
          interval = setInterval(loop, 120);
        }
      }

      // controles teclado (setas + WASD)
      window.addEventListener('keydown', function(e){
        if (!running) return;
        const key = e.key;
        // evitar rolagem de página com as setas
        if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(key)) e.preventDefault();

        if((key === 'ArrowUp' || key === 'w' || key === 'W') && dir.y !== 1){ dir = {x: 0, y: -1}; }
        if((key === 'ArrowDown' || key === 's' || key === 'S') && dir.y !== -1){ dir = {x: 0, y: 1}; }
        if((key === 'ArrowLeft' || key === 'a' || key === 'A') && dir.x !== 1){ dir = {x: -1, y: 0}; }
        if((key === 'ArrowRight' || key === 'd' || key === 'D') && dir.x !== -1){ dir = {x: 1, y: 0}; }
      });

      // Adiciona os event listeners dos botões principais
      playBtn.addEventListener('click', startGame);
      restartBtn.addEventListener('click', reset);

      // Controles mobile
      document.getElementById('btn-up').addEventListener('click', () => {
        if(running && dir.y !== 1) dir = {x: 0, y: -1};
      });
      document.getElementById('btn-down').addEventListener('click', () => {
        if(running && dir.y !== -1) dir = {x: 0, y: 1};
      });
      document.getElementById('btn-left').addEventListener('click', () => {
        if(running && dir.x !== 1) dir = {x: -1, y: 0};
      });
      document.getElementById('btn-right').addEventListener('click', () => {
        if(running && dir.x !== -1) dir = {x: 1, y: 0};
      });

      // Desenha o estado inicial
      draw();
    })();
    </script>
    <!-- Snake game end -->
  </div>
    </div>
  </div>

</section>


</body>
</html>